<script>
(function(){
  const banner = document.getElementById('cookie-banner');
  const btn = document.getElementById('accept-cookies');

  function showBanner() {
    banner.style.display = 'flex';
  }

  function hideBanner() {
    banner.style.display = 'none';
  }

  // Mostrar banner solo si no ha aceptado cookies
  if(localStorage.getItem('cookies_accepted') === 'true'){
    hideBanner();
  } else {
    showBanner();
  }

  // Bot√≥n de aceptar
  btn.addEventListener('click', function(){
    localStorage.setItem('cookies_accepted', 'true');
    hideBanner();

    // Activar Google Analytics tras consentimiento
    if(typeof gtag === 'function'){
      gtag('consent', 'update', {
        'analytics_storage': 'granted'
      });
    }
  });

  // Ajuste responsivo
  function adjustBanner(){
    if(window.innerWidth < 500){
      banner.style.flexDirection = 'column';
      banner.style.textAlign = 'center';
    } else {
      banner.style.flexDirection = 'row';
      banner.style.textAlign = 'center';
    }
  }

  window.addEventListener('resize', adjustBanner);
  adjustBanner();
})();
</script>
